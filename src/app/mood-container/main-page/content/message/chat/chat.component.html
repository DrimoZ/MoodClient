<div id="conversation" class="d-flex flex-column  w-100 h-100">
  <div class="d-flex flex-row justify-content-between groupName">
    <p>{{groupName}}</p>
    <button *ngIf="groupName!= '';" (click)="displayPopupMember()"  class="btn">Member</button>
  </div>
  <div #scroll class="chat-container flex-shrink-0 flex-grow-1" [scrollTop]="scroll.scrollHeight">
    <div *ngIf="messages.length >= showCount" class="w-100">
      <button class="btn showMoreBtn w-100" (click)="loadMoreMessage()" i18n>
        <span class="">Show More ({{messages.length}}) </span>
        <i class="fa-solid fa-chevron-up"></i>
      </button>
    </div>
    <div  *ngFor="let msg of messages" class="d-flex flex-column" >
      <div class="d-flex" style="justify-content: center">
        <p class="date">{{formatDate(msg.date)}}</p>
      </div>
      <div class="d-flex"  [ngClass]="msg.userId == userId? 'd-none':'flex-row'">{{msg.userName}}</div>
      <div class="d-flex align-items-center" [ngClass]="msg.userId == userId? 'flex-row-reverse':'flex-row'">
        <img class="profile-picture" alt="" src="{{msg.url}}" width="50" height="50" >
        <div class="message-bubble" [ngClass]="msg.userId == userId? 'right':'left'">
          <p>{{msg.content}}</p>
        </div>
      </div>
    </div>
  </div>
  <div class="border-gold bottom-0 end-0" style="width: 100%">
    <div id="sender" style="display: flex; flex-wrap: nowrap;padding-top: 1%;" >
      <input #message class="position-relative container-fluid" type="text" style="width: 100%;" placeholder="Message" value="">
      <button class="btn position-relative bottom-0 end-0 " (click)="sendMessage(message.value)">Envoyer</button>
    </div>
  </div>
</div>

<app-member-popup id="popupMember"></app-member-popup>
